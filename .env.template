# OCI MCP Logan Server Environment Configuration Template
# Copy this file to .env and update with your actual values

# ===========================================
# OCI Configuration
# ===========================================

# Default OCI Compartment ID (required)
# Get from OCI Console > Identity & Security > Compartments
# [Link to Secure Variable: OCI_COMPARTMENT_ID]
OCI_COMPARTMENT_ID=
# [Link to Secure Variable: LOGAN_COMPARTMENT_ID]
LOGAN_COMPARTMENT_ID=

# OCI Region (optional - defaults to us-ashburn-1)
# Examples: us-ashburn-1, eu-frankfurt-1, ap-sydney-1
OCI_REGION=us-ashburn-1
LOGAN_REGION=

# OCI Authentication (optional - can use ~/.oci/config instead)
# Only set these if not using OCI CLI configuration
# OCI_USER_ID=
# OCI_TENANCY_ID=
# OCI_FINGERPRINT=
# OCI_KEY_FILE=
# OCI_PRIVATE_KEY_CONTENT=
# OCI_NAMESPACE=

# ===========================================
# MCP Server Transport Configuration
# ===========================================

# Transport type: stdio (default), sse (legacy), http, or streamable-http (recommended for remote)
# - stdio: Standard input/output for Claude Desktop and local development
# - sse: Server-Sent Events (legacy, use HTTP instead)
# - http / streamable-http: Streamable HTTP transport (recommended for production)
MCP_TRANSPORT=stdio

# HTTP/SSE Transport Configuration (when MCP_TRANSPORT=http or sse)
MCP_HOST=0.0.0.0
MCP_PORT=8001
# Back-compat (legacy)
MCP_HTTP_HOST=0.0.0.0
MCP_HTTP_PORT=8001
MCP_HTTP_PATH=/mcp

# Base URL for OAuth callbacks (auto-detected if not set)
# MCP_BASE_URL=http://localhost:8001

# ===========================================
# OCI IAM OAuth 2.0 Authentication
# ===========================================
# Uses FastMCP's OCIProvider (same pattern as OPSI and other MCP servers)

# Enable OAuth authentication (default: false)
# When enabled, clients must authenticate via OCI IAM
FASTMCP_OAUTH_ENABLED=false

# OCI Identity Domain GUID
# [Link to Secure Variable: FASTMCP_SERVER_AUTH_OCI_IAM_GUID]
FASTMCP_SERVER_AUTH_OCI_IAM_GUID=

# OIDC Discovery URL for your Identity Domain
# [Link to Secure Variable: FASTMCP_SERVER_AUTH_OCI_CONFIG_URL]
FASTMCP_SERVER_AUTH_OCI_CONFIG_URL=

# OAuth Application Client ID
# [Link to Secure Variable: FASTMCP_SERVER_AUTH_OCI_CLIENT_ID]
FASTMCP_SERVER_AUTH_OCI_CLIENT_ID=

# OAuth Application Client Secret (keep this secure!)
# [Link to Secure Variable: FASTMCP_SERVER_AUTH_OCI_CLIENT_SECRET]
FASTMCP_SERVER_AUTH_OCI_CLIENT_SECRET=

# JWT Signing Key for internal session tokens (generate with: python -c "import secrets; print(secrets.token_hex(32))")
# [Link to Secure Variable: JWT_SIGNING_KEY]
JWT_SIGNING_KEY=

# Storage Encryption Key for token caching (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
# If not set, tokens are stored unencrypted (not recommended for production)
# [Link to Secure Variable: STORAGE_ENCRYPTION_KEY]
STORAGE_ENCRYPTION_KEY=

# ===========================================
# OpenTelemetry / OCI APM (optional)
# ===========================================
# Enable tracing (default true)
# OTEL_TRACING_ENABLED=true
#
# OCI APM (Production)
# OCI_APM_ENDPOINT=[Link to Secure Variable: OCI_APM_ENDPOINT]
# OCI_APM_PRIVATE_DATA_KEY=[Link to Secure Variable: OCI_APM_PRIVATE_DATA_KEY]
# OTEL_DISABLE_LOCAL=true
#
# Generic OTLP endpoint (HTTP or gRPC)
# OTEL_EXPORTER_OTLP_ENDPOINT=localhost:4317

# ===========================================
# OAuth Callback Configuration
# ===========================================
# The callback URL should be registered in your OCI Identity Domain OAuth app
# Callback URL: http://localhost:8001/oauth/callback

# ===========================================
# Application Configuration
# ===========================================

# Default time range for MITRE analysis (Sysmon data)
DEFAULT_MITRE_TIME_RANGE=30d

# Default time range for general queries
DEFAULT_QUERY_TIME_RANGE=24h

# ===========================================
# Logging Configuration
# ===========================================

# Log level: DEBUG, INFO, WARN, ERROR, NONE
MCP_LOG_LEVEL=INFO

# Enable file logging
MCP_LOG_TO_FILE=false

# Log file directory
# MCP_LOG_DIR=~/.oci_logan_mcp/logs

# Maximum log file size in bytes (default: 10MB)
MCP_LOG_MAX_SIZE=10485760

# Redact sensitive data in logs (default: true)
MCP_LOG_REDACT=true

# ===========================================
# Quick Start Guide
# ===========================================
#
# 1. Copy this file to .env:
#    cp .env.template .env
#
# 2. Set your OCI compartment and region:
#    LOGAN_COMPARTMENT_ID=[Link to Secure Variable: LOGAN_COMPARTMENT_ID]
#    LOGAN_REGION=us-ashburn-1
#
# 3. For OAuth (optional), generate keys:
#    # Generate JWT signing key:
#    python -c "import secrets; print(secrets.token_hex(32))"
#
#    # Generate encryption key:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# 4. Start the server:
#    # stdio mode (Claude Desktop):
#    python main.py
#
#    # HTTP mode with OAuth:
#    MCP_TRANSPORT=http FASTMCP_OAUTH_ENABLED=true python main.py
