# OCI MCP Logan Server Environment Configuration Template
# Copy this file to .env and update with your actual values

# ===========================================
# OCI Configuration
# ===========================================

# Default OCI Compartment ID (required)
# Get from OCI Console > Identity & Security > Compartments
OCI_COMPARTMENT_ID=
LOGAN_COMPARTMENT_ID=

# OCI Region (optional - defaults to us-ashburn-1)
# Examples: us-ashburn-1, eu-frankfurt-1, ap-sydney-1
OCI_REGION=us-ashburn-1
LOGAN_REGION=

# OCI Authentication (optional - can use ~/.oci/config instead)
# Only set these if not using OCI CLI configuration
# OCI_USER_ID=
# OCI_TENANCY_ID=
# OCI_FINGERPRINT=
# OCI_KEY_FILE=
# OCI_PRIVATE_KEY_CONTENT=
# OCI_NAMESPACE=

# ===========================================
# MCP Server Transport Configuration
# ===========================================

# Transport type: stdio (default), sse (legacy), or http (recommended for remote)
# - stdio: Standard input/output for Claude Desktop and local development
# - sse: Server-Sent Events (legacy, use HTTP instead)
# - http: Streamable HTTP transport (recommended for production)
MCP_TRANSPORT=stdio

# HTTP/SSE Transport Configuration (when MCP_TRANSPORT=http or sse)
MCP_HTTP_HOST=0.0.0.0
MCP_HTTP_PORT=8001
MCP_HTTP_PATH=/mcp

# Base URL for OAuth callbacks (auto-detected if not set)
# MCP_BASE_URL=http://localhost:8001

# ===========================================
# OCI IAM OAuth 2.0 Authentication
# ===========================================
# Uses FastMCP's OCIProvider (same pattern as OPSI and other MCP servers)

# Enable OAuth authentication (default: false)
# When enabled, clients must authenticate via OCI IAM
FASTMCP_OAUTH_ENABLED=false

# OCI Identity Domain GUID (e.g., idcs-xxx.identity.oraclecloud.com)
FASTMCP_SERVER_AUTH_OCI_IAM_GUID=idcs-50d5991cc3a748cfaf09115dcf16b2df.identity.oraclecloud.com

# OIDC Discovery URL for your Identity Domain
FASTMCP_SERVER_AUTH_OCI_CONFIG_URL=https://idcs-50d5991cc3a748cfaf09115dcf16b2df.identity.oraclecloud.com:443/.well-known/openid-configuration

# OAuth Application Client ID
FASTMCP_SERVER_AUTH_OCI_CLIENT_ID=588b997af203425b8283035b3e75d176

# OAuth Application Client Secret (keep this secure!)
FASTMCP_SERVER_AUTH_OCI_CLIENT_SECRET=idcscs-5e4a2477-7490-4a81-a664-7e863e98f86a

# JWT Signing Key for internal session tokens (generate with: python -c "import secrets; print(secrets.token_hex(32))")
JWT_SIGNING_KEY=

# Storage Encryption Key for token caching (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
# If not set, tokens are stored unencrypted (not recommended for production)
STORAGE_ENCRYPTION_KEY=

# ===========================================
# OAuth Callback Configuration
# ===========================================
# The callback URL should be registered in your OCI Identity Domain OAuth app
# Callback URL: http://localhost:8001/oauth/callback

# ===========================================
# Application Configuration
# ===========================================

# Default time range for MITRE analysis (Sysmon data)
DEFAULT_MITRE_TIME_RANGE=30d

# Default time range for general queries
DEFAULT_QUERY_TIME_RANGE=24h

# ===========================================
# Logging Configuration
# ===========================================

# Log level: DEBUG, INFO, WARN, ERROR, NONE
MCP_LOG_LEVEL=INFO

# Enable file logging
MCP_LOG_TO_FILE=false

# Log file directory
# MCP_LOG_DIR=~/.oci_logan_mcp/logs

# Maximum log file size in bytes (default: 10MB)
MCP_LOG_MAX_SIZE=10485760

# Redact sensitive data in logs (default: true)
MCP_LOG_REDACT=true

# ===========================================
# Quick Start Guide
# ===========================================
#
# 1. Copy this file to .env:
#    cp .env.template .env
#
# 2. Set your OCI compartment and region:
#    LOGAN_COMPARTMENT_ID=ocid1.compartment.oc1..xxx
#    LOGAN_REGION=us-ashburn-1
#
# 3. For OAuth (optional), generate keys:
#    # Generate JWT signing key:
#    python -c "import secrets; print(secrets.token_hex(32))"
#
#    # Generate encryption key:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# 4. Start the server:
#    # stdio mode (Claude Desktop):
#    python main.py
#
#    # HTTP mode with OAuth:
#    MCP_TRANSPORT=http FASTMCP_OAUTH_ENABLED=true python main.py
